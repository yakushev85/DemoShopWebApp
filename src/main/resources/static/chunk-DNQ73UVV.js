import{a as ae,b as le}from"./chunk-3KGPK6FE.js";import{$ as w,$a as M,A as c,Aa as ie,B as d,Ba as C,Fa as re,H as m,J as p,Ka as oe,L as h,M as E,Ma as U,Na as ne,O as v,Qa as q,R as a,Ra as g,Va as V,Wa as l,Xa as A,Y as i,Ya as L,Z as r,Za as O,_ as S,ab as k,ba as b,bb as z,ca as f,cb as N,db as _,eb as D,fa as X,fb as se,gb as me,ka as Y,la as n,m as K,ma as R,oa as Z,pa as $,qa as ee,ra as te,t as Q,u as F,w as B}from"./chunk-TCKV3CHR.js";var I=class o{constructor(t,e){this.userService=t;this.router=e}resolve(t,e){return this.userService.getItem(t.params.itemid).pipe(K(s=>this.router.navigateByUrl("/")))}static{this.\u0275fac=function(e){return new(e||o)(B(g),B(U))}}static{this.\u0275prov=Q({token:o,factory:o.\u0275fac})}};function fe(o,t){if(o&1){let e=w();i(0,"div")(1,"p"),n(2),r(),i(3,"form",1)(4,"fieldset",2)(5,"fieldset",3),S(6,"input",4),r(),i(7,"fieldset",3),S(8,"input",5),r(),i(9,"fieldset",3)(10,"select",6)(11,"option",7),n(12,"Default"),r(),i(13,"option",8),n(14,"Admin"),r(),i(15,"option",9),n(16,"Locked"),r()()()(),i(17,"p",10)(18,"button",11),b("click",function(){c(e);let u=f();return d(u.submitForm())}),n(19,"Update User"),r()()()()}if(o&2){let e=f();m(2),Z("ID: ",e.user==null?null:e.user.id," Username: ",e.user==null?null:e.user.username,""),m(),a("formGroup",e.userForm),m(),a("disabled",e.isSubmitting),m(6),a("value",e.user==null?null:e.user.role),m(8),a("disabled",!(e.userForm.value.password==e.userForm.value.repassword&&e.userForm.valid))}}var j=class o{constructor(t,e,s,u){this.route=t;this.router=e;this.userService=s;this.fb=u;this.userForm=this.fb.group({password:["",[l.required,l.minLength(3)]],repassword:["",[l.required,l.minLength(3)]],role:""});this.isSubmitting=!1;this.isAdmin=!1}ngOnInit(){this.route.data.subscribe(t=>{this.user=t.user,this.userForm.patchValue(this.user)}),this.userService.isAdmin.subscribe(t=>{this.isAdmin=t})}submitForm(){if(!this.user)return;this.isSubmitting=!0;let t=this.userForm.value;this.userService.update({id:this.user?.id,password:t.password,role:t.role}).subscribe({next:()=>{this.isSubmitting=!1,this.router.navigateByUrl("/users")},error:()=>{this.isSubmitting=!1}})}static{this.\u0275fac=function(e){return new(e||o)(p(oe),p(U),p(g),p(D))}}static{this.\u0275cmp=h({type:o,selectors:[["app-user-item"]],standalone:!1,decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],[3,"disabled"],[1,"form-group"],["formControlName","password","type","password","placeholder","New Password",1,"form-control","form-control-md"],["formControlName","repassword","type","password","placeholder","Re-enter new Password",1,"form-control","form-control-md"],["formControlName","role",1,"form-control","form-control-md",3,"value"],["value",""],["value","admin"],["value","locked"],[1,"mb-3","p-2"],["type","button",1,"btn","btn-success",3,"click","disabled"]],template:function(e,s){e&1&&v(0,fe,20,6,"div",0),e&2&&a("ngIf",s.isAdmin)},dependencies:[C,O,N,_,V,z,A,L,M,k],encapsulation:2})}};function ge(o,t){if(o&1&&(i(0,"tr")(1,"th",13),n(2),r(),i(3,"td")(4,"a",14),n(5),r()(),i(6,"td"),n(7),r()()),o&2){let e=t.$implicit;m(2),R(e.id),m(2),X("routerLink","/users/",e.id,""),m(),R(e.username),m(2),R(e.role)}}function ve(o,t){if(o&1&&(i(0,"div")(1,"div")(2,"a",9),n(3,"Add"),r()(),i(4,"table",10)(5,"thead")(6,"tr")(7,"th",11),n(8,"#"),r(),i(9,"th",11),n(10,"Username"),r(),i(11,"th",11),n(12,"Role"),r()()(),i(13,"tbody"),v(14,ge,8,5,"tr",12),r()()()),o&2){let e=f();m(14),a("ngForOf",e.users)}}var G=class o{constructor(t){this.userService=t;this.users=[];this.isAdmin=!1;this.pageNumber=1;this.pageSize=10;this.totalElements=0}ngOnInit(){this.listValues(),this.userService.isAdmin.subscribe(t=>{this.isAdmin=t})}listValues(){this.userService.getAll(this.pageNumber-1,this.pageSize).subscribe(t=>{t&&(this.users=t.content,this.pageNumber=t.pageable.pageNumber+1,this.pageSize=t.pageable.pageSize,this.totalElements=t.totalElements)})}updatePageSize(t){this.pageSize=+t,this.listValues()}static{this.\u0275fac=function(e){return new(e||o)(p(g))}}static{this.\u0275cmp=h({type:o,selectors:[["app-user-list"]],standalone:!1,decls:18,vars:6,consts:[["pageSizeSelect",""],[4,"ngIf"],[1,"row"],[1,"col-md-9",2,"padding-left","5%"],[3,"pageChange","page","pageSize","collectionSize","maxSize","boundaryLinks"],[1,"col-md-3","mt-2",2,"text-align","right"],[1,"mr-2"],[3,"change"],["selected","true"],["routerLink","/users/new",1,"btn","btn-primary"],[1,"table","table-light"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],[3,"routerLink"]],template:function(e,s){if(e&1){let u=w();v(0,ve,15,1,"div",1),i(1,"div")(2,"div",2)(3,"div",3)(4,"ngb-pagination",4),te("pageChange",function(x){return c(u),ee(s.pageNumber,x)||(s.pageNumber=x),d(x)}),b("pageChange",function(){return c(u),d(s.listValues())}),r()(),i(5,"div",5)(6,"span",6),n(7,"Page Size "),r(),i(8,"select",7,0),b("change",function(){c(u);let x=Y(9);return d(s.updatePageSize(x.value))}),i(10,"option"),n(11,"5"),r(),i(12,"option",8),n(13,"10"),r(),i(14,"option"),n(15,"20"),r(),i(16,"option"),n(17,"50"),r()()()()()}e&2&&(a("ngIf",s.isAdmin),m(4),$("page",s.pageNumber),a("pageSize",s.pageSize)("collectionSize",s.totalElements)("maxSize",5)("boundaryLinks",!0))},dependencies:[ie,C,N,_,ne,ae],encapsulation:2})}};function Se(o,t){if(o&1){let e=w();i(0,"div")(1,"form",1)(2,"fieldset",2)(3,"fieldset",3),S(4,"input",4),r(),i(5,"fieldset",3),S(6,"input",5),r(),i(7,"fieldset",3),S(8,"input",6),r(),i(9,"fieldset",3)(10,"select",7)(11,"option",8),n(12,"Default"),r(),i(13,"option",9),n(14,"Admin"),r(),i(15,"option",10),n(16,"Locked"),r()()()(),i(17,"p",11)(18,"button",12),b("click",function(){c(e);let u=f();return d(u.submitForm())}),n(19,"New User"),r()()()()}if(o&2){let e=f();m(),a("formGroup",e.userForm),m(),a("disabled",e.isSubmitting),m(16),a("disabled",!(e.userForm.valid&&e.userForm.value.password==e.userForm.value.repassword))}}var T=class o{constructor(t,e,s){this.router=t;this.userService=e;this.fb=s;this.userForm=this.fb.group({username:["",[l.required,l.minLength(2)]],password:["",[l.required,l.minLength(3)]],repassword:["",[l.required,l.minLength(3)]],role:""});this.isSubmitting=!1;this.isAdmin=!1}ngOnInit(){this.userService.isAdmin.subscribe(t=>{this.isAdmin=t})}submitForm(){this.isSubmitting=!0;let t=this.userForm.value;this.userService.add(t).subscribe({next:()=>{this.isSubmitting=!1,this.router.navigateByUrl("/users")},error:()=>{this.isSubmitting=!1}})}static{this.\u0275fac=function(e){return new(e||o)(p(U),p(g),p(D))}}static{this.\u0275cmp=h({type:o,selectors:[["app-user-new"]],standalone:!1,decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],[3,"disabled"],[1,"form-group"],["formControlName","username","type","text","placeholder","Username",1,"form-control","form-control-md"],["formControlName","password","type","password","placeholder","Password",1,"form-control","form-control-md"],["formControlName","repassword","type","password","placeholder","Re-enter password",1,"form-control","form-control-md"],["formControlName","role",1,"form-control","form-control-md"],["value",""],["value","admin"],["value","locked"],[1,"mb-3","p-2"],["type","button",1,"btn","btn-success",3,"click","disabled"]],template:function(e,s){e&1&&v(0,Se,20,3,"div",0),e&2&&a("ngIf",s.isAdmin)},dependencies:[C,O,N,_,V,z,A,L,M,k],encapsulation:2})}};var be=[{path:"",component:G},{path:"new",component:T},{path:":itemid",component:j,resolve:{user:I}}],P=class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275mod=E({type:o})}static{this.\u0275inj=F({imports:[q.forChild(be),q]})}};var de=class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275mod=E({type:o})}static{this.\u0275inj=F({providers:[I],imports:[re,se,me,P,le]})}};export{de as UserModule};
