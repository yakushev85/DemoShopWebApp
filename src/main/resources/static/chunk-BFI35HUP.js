import{a as le,b as fe}from"./chunk-3KGPK6FE.js";import{$ as P,$a as T,A as s,Aa as oe,B as u,Ba as y,Da as ne,Ea as j,Fa as ce,H as c,J as p,Ka as U,L as I,M as V,Ma as _,Na as me,O as h,Qa as K,R as a,Ra as x,Sa as S,Ta as ae,Va as k,Wa as b,Xa as z,Y as i,Ya as D,Z as r,Za as L,_ as f,_a as M,ab as O,ba as v,ca as g,cb as pe,db as de,eb as B,fa as $,fb as se,gb as ue,ka as ee,la as n,m as Y,ma as l,pa as te,qa as ie,ra as re,t as Z,u as R,va as F,w as J,wa as A}from"./chunk-TCKV3CHR.js";var N=class o{constructor(t,e){this.productService=t;this.router=e}resolve(t,e){return this.productService.getItem(t.params.itemid).pipe(Y(m=>this.router.navigateByUrl("/")))}static{this.\u0275fac=function(e){return new(e||o)(J(S),J(_))}}static{this.\u0275prov=Z({token:o,factory:o.\u0275fac})}};function he(o,t){if(o&1){let e=P();i(0,"div")(1,"form",1)(2,"fieldset",2)(3,"fieldset",3),f(4,"input",4),r(),i(5,"fieldset",3),f(6,"input",5),r(),i(7,"fieldset",3),f(8,"input",6),r()(),i(9,"p",7)(10,"button",8),v("click",function(){s(e);let d=g();return u(d.submitAdminForm())}),n(11,"Update Product"),r()()()()}if(o&2){let e=g();c(),a("formGroup",e.productAdminForm),c(),a("disabled",e.isSubmitting),c(2),a("value",e.product==null?null:e.product.id),c(2),a("value",e.product==null?null:e.product.name),c(4),a("disabled",!e.productAdminForm.valid)}}function Pe(o,t){if(o&1){let e=P();i(0,"div")(1,"table",9)(2,"tbody")(3,"tr")(4,"th",10),n(5,"Name"),r(),i(6,"td"),n(7),r()(),i(8,"tr")(9,"th",10),n(10,"Price"),r(),i(11,"td"),n(12),F(13,"currency"),r()(),i(14,"tr")(15,"th",10),n(16,"Created At"),r(),i(17,"td"),n(18),r()()()(),i(19,"form",1)(20,"fieldset",2)(21,"fieldset",3),f(22,"textarea",11),r()(),i(23,"p",7)(24,"button",12),v("click",function(){s(e);let d=g();return u(d.submitForm())}),n(25,"Buy Product"),r()()()()}if(o&2){let e=g();c(7),l(e.product==null?null:e.product.name),c(5),l(A(13,6,e.product==null?null:e.product.price,"USD")),c(6),l(e.product==null?null:e.product.createdAt),c(),a("formGroup",e.productForm),c(),a("disabled",e.isSubmitting),c(4),a("disabled",!e.productForm.valid)}}var G=class o{constructor(t,e,m,d,E,C){this.route=t;this.router=e;this.userService=m;this.transactionService=d;this.productService=E;this.fb=C;this.productForm=this.fb.group({description:["",b.required]});this.productAdminForm=this.fb.group({id:["",b.required],name:["",b.required],price:["",b.required]});this.isSubmitting=!1;this.isAdmin=!1}ngOnInit(){this.route.data.subscribe(t=>{this.product=t.product,this.productAdminForm.patchValue(this.product)}),this.userService.isAdmin.subscribe(t=>{this.isAdmin=t})}submitForm(){if(!this.product)return;this.isSubmitting=!0;let t={description:this.productForm.value.description,productId:this.product?.id};this.transactionService.createItem(t).subscribe({next:()=>{this.isSubmitting=!1,this.router.navigateByUrl("/transactions")},error:()=>{this.isSubmitting=!1}})}submitAdminForm(){if(!this.product)return;this.isSubmitting=!0;let t=this.productAdminForm.value;this.productService.update(t).subscribe({next:()=>{this.isSubmitting=!1,this.router.navigateByUrl("/products")},error:()=>{this.isSubmitting=!1}})}static{this.\u0275fac=function(e){return new(e||o)(p(U),p(_),p(x),p(ae),p(S),p(B))}}static{this.\u0275cmp=I({type:o,selectors:[["app-product-item"]],standalone:!1,decls:2,vars:2,consts:[[4,"ngIf"],[3,"formGroup"],[3,"disabled"],[1,"form-group"],["formControlName","id","type","number","readonly","true",1,"form-control","form-control-md",3,"value"],["formControlName","name","type","text","placeholder","Product Name",1,"form-control","form-control-md",3,"value"],["formControlName","price","type","number","value","product?.price","placeholder","Product Price",1,"form-control","form-control-md"],[1,"mb-3","p-2"],["type","button",1,"btn","btn-success",3,"click","disabled"],[1,"table","table-light"],["scope","row"],["formControlName","description","type","text","placeholder","Description",1,"form-control","form-control-md"],["type","button",1,"btn-dark",3,"click","disabled"]],template:function(e,m){e&1&&h(0,he,12,5,"div",0)(1,Pe,26,9,"div",0),e&2&&(a("ngIf",m.isAdmin),c(),a("ngIf",!m.isAdmin))},dependencies:[y,L,k,M,z,D,T,O,j],encapsulation:2})}};function Ce(o,t){o&1&&(i(0,"div")(1,"a",12),n(2,"Add"),r()())}function Ie(o,t){if(o&1&&(i(0,"tr")(1,"th",13),n(2),r(),i(3,"td")(4,"a",14),n(5),r()(),i(6,"td"),n(7),F(8,"currency"),r(),i(9,"td"),n(10),F(11,"date"),r()()),o&2){let e=t.$implicit;c(2),l(e.id),c(2),$("routerLink","/products/",e.id,""),c(),l(e.name),c(2),l(A(8,6,e.price,"USD")),c(3),l(A(11,9,e.createdAt,"medium"))}}var q=class o{constructor(t,e){this.productService=t;this.userService=e;this.products=[];this.isAdmin=!1;this.pageNumber=1;this.pageSize=10;this.totalElements=0}ngOnInit(){this.listValues(),this.userService.isAdmin.subscribe(t=>{this.isAdmin=t})}listValues(){this.productService.getAll(this.pageNumber-1,this.pageSize).subscribe(t=>{t&&(this.products=t.content,this.pageNumber=t.pageable.pageNumber+1,this.pageSize=t.pageable.pageSize,this.totalElements=t.totalElements)})}updatePageSize(t){this.pageSize=+t,this.listValues()}static{this.\u0275fac=function(e){return new(e||o)(p(S),p(x))}}static{this.\u0275cmp=I({type:o,selectors:[["app-product-list"]],standalone:!1,decls:31,vars:7,consts:[["pageSizeSelect",""],[4,"ngIf"],[1,"table","table-light"],["scope","col"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-md-9",2,"padding-left","5%"],[3,"pageChange","page","pageSize","collectionSize","maxSize","boundaryLinks"],[1,"col-md-3","mt-2",2,"text-align","right"],[1,"mr-2"],[3,"change"],["selected","true"],["routerLink","/products/new",1,"btn","btn-primary"],["scope","row"],[3,"routerLink"]],template:function(e,m){if(e&1){let d=P();h(0,Ce,3,0,"div",1),i(1,"table",2)(2,"thead")(3,"tr")(4,"th",3),n(5,"#"),r(),i(6,"th",3),n(7,"Name"),r(),i(8,"th",3),n(9,"Price"),r(),i(10,"th",3),n(11,"Created At"),r()()(),i(12,"tbody"),h(13,Ie,12,12,"tr",4),r()(),i(14,"div")(15,"div",5)(16,"div",6)(17,"ngb-pagination",7),re("pageChange",function(C){return s(d),ie(m.pageNumber,C)||(m.pageNumber=C),u(C)}),v("pageChange",function(){return s(d),u(m.listValues())}),r()(),i(18,"div",8)(19,"span",9),n(20,"Page Size "),r(),i(21,"select",10,0),v("change",function(){s(d);let C=ee(22);return u(m.updatePageSize(C.value))}),i(23,"option"),n(24,"5"),r(),i(25,"option",11),n(26,"10"),r(),i(27,"option"),n(28,"20"),r(),i(29,"option"),n(30,"50"),r()()()()()}e&2&&(a("ngIf",m.isAdmin),c(13),a("ngForOf",m.products),c(4),te("page",m.pageNumber),a("pageSize",m.pageSize)("collectionSize",m.totalElements)("maxSize",5)("boundaryLinks",!0))},dependencies:[oe,y,me,pe,de,le,j,ne],encapsulation:2})}};function ye(o,t){if(o&1){let e=P();i(0,"div")(1,"form",1)(2,"fieldset",2)(3,"fieldset",3),f(4,"input",4),r(),i(5,"fieldset",3),f(6,"input",5),r()(),i(7,"p",6)(8,"button",7),v("click",function(){s(e);let d=g();return u(d.submitAdminForm())}),n(9,"Create Product"),r()()()()}if(o&2){let e=g();c(),a("formGroup",e.productAdminForm),c(),a("disabled",e.isSubmitting),c(6),a("disabled",!e.productAdminForm.valid)}}var W=class o{constructor(t,e,m,d,E){this.route=t;this.router=e;this.userService=m;this.productService=d;this.fb=E;this.productAdminForm=this.fb.group({name:["",b.required],price:["",b.required]});this.isSubmitting=!1;this.isAdmin=!1}ngOnInit(){this.userService.isAdmin.subscribe(t=>{this.isAdmin=t})}submitAdminForm(){this.isSubmitting=!0;let t=this.productAdminForm.value;this.productService.add(t).subscribe({next:()=>{this.isSubmitting=!1,this.router.navigateByUrl("/products")},error:()=>{this.isSubmitting=!1}})}static{this.\u0275fac=function(e){return new(e||o)(p(U),p(_),p(x),p(S),p(B))}}static{this.\u0275cmp=I({type:o,selectors:[["app-product-new"]],standalone:!1,decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],[3,"disabled"],[1,"form-group"],["formControlName","name","type","text","placeholder","Product Name",1,"form-control","form-control-md"],["formControlName","price","type","number","placeholder","Product Price",1,"form-control","form-control-md"],[1,"mb-3","p-2"],["type","button",1,"btn","btn-success",3,"click","disabled"]],template:function(e,m){e&1&&h(0,ye,10,3,"div",0),e&2&&a("ngIf",m.isAdmin)},dependencies:[y,L,k,M,z,D,T,O],encapsulation:2})}};var _e=[{path:"",component:q},{path:"new",component:W},{path:":itemid",component:G,resolve:{product:N}}],H=class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275mod=V({type:o})}static{this.\u0275inj=R({imports:[K.forChild(_e),K]})}};var be=class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275mod=V({type:o})}static{this.\u0275inj=R({providers:[N],imports:[ce,H,se,ue,fe]})}};export{be as ProductModule};
