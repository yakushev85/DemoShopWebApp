import{a as Q,b as X}from"./chunk-3KGPK6FE.js";import{$ as O,A as h,Aa as q,B as I,Ba as x,Da as G,Fa as H,H as s,J as m,Ka as J,L as b,M as T,Ma as C,Na as E,O as d,Qa as P,R as l,Ra as _,Sa as K,Ta as y,Y as n,Z as e,ba as z,ca as g,fa as p,ka as V,la as r,m as k,ma as c,pa as D,qa as F,ra as U,t as M,u as S,va as B,w,wa as W}from"./chunk-TCKV3CHR.js";var u=class a{constructor(i,t){this.transactionService=i;this.router=t}resolve(i,t){return this.transactionService.getItem(i.params.itemid).pipe(k(o=>this.router.navigateByUrl("/")))}static{this.\u0275fac=function(t){return new(t||a)(w(y),w(C))}}static{this.\u0275prov=M({token:a,factory:a.\u0275fac})}};function it(a,i){if(a&1&&(n(0,"tr")(1,"th",1),r(2,"User"),e(),n(3,"td")(4,"a",2),r(5),e()()()),a&2){let t=g();s(4),p("routerLink","/users/",t.transaction==null||t.transaction.user==null?null:t.transaction.user.id,""),s(),c(t.transaction==null||t.transaction.user==null?null:t.transaction.user.username)}}var R=class a{constructor(i,t,o,v){this.route=i;this.router=t;this.userService=o;this.productService=v;this.isAdmin=!1;this.isSubmitting=!1}ngOnInit(){this.route.data.subscribe(i=>{this.transaction=i.transaction,this.productService.getItem(this.transaction.product.id).subscribe(t=>{this.product=t})}),this.userService.isAdmin.subscribe(i=>{this.isAdmin=i})}static{this.\u0275fac=function(t){return new(t||a)(m(J),m(C),m(_),m(K))}}static{this.\u0275cmp=b({type:a,selectors:[["app-transaction-item"]],standalone:!1,decls:24,vars:7,consts:[[1,"table","table-light"],["scope","row"],[3,"routerLink"],[4,"ngIf"]],template:function(t,o){t&1&&(n(0,"table",0)(1,"tbody")(2,"tr")(3,"th",1),r(4,"Description"),e(),n(5,"td"),r(6),e()(),n(7,"tr")(8,"th",1),r(9,"Product Name"),e(),n(10,"td")(11,"a",2),r(12),e()()(),n(13,"tr")(14,"th",1),r(15,"Product Price"),e(),n(16,"td"),r(17),e()(),n(18,"tr")(19,"th",1),r(20,"Created At"),e(),n(21,"td"),r(22),e()(),d(23,it,6,3,"tr",3),e()()),t&2&&(s(6),c(o.transaction==null?null:o.transaction.description),s(5),p("routerLink","/products/",o.product==null?null:o.product.id,""),s(),c(o.product==null?null:o.product.name),s(5),c(o.product==null?null:o.product.price),s(5),c(o.transaction==null?null:o.transaction.createdAt),s(),l("ngIf",o.isAdmin))},dependencies:[x,E],encapsulation:2})}};function nt(a,i){a&1&&(n(0,"th",2),r(1,"User"),e())}function rt(a,i){if(a&1&&(n(0,"td")(1,"a",13),r(2),e()()),a&2){let t=g().$implicit;s(),p("routerLink","/users/",t.user==null?null:t.user.id,""),s(),c(t.user==null?null:t.user.username)}}function at(a,i){if(a&1&&(n(0,"tr")(1,"th",12)(2,"a",13),r(3),e()(),n(4,"td"),r(5),e(),n(6,"td")(7,"a",13),r(8),e()(),n(9,"td"),r(10),B(11,"date"),e(),d(12,rt,3,3,"td",14),e()),a&2){let t=i.$implicit,o=g();s(2),p("routerLink","/transactions/",t.id,""),s(),c(t.id),s(2),c(t.description),s(2),p("routerLink","/products/",t.product.id,""),s(),c(t.product.name),s(2),c(W(11,9,t.createdAt,"medium")),s(2),l("ngIf",o.isAdmin)}}var N=class a{constructor(i,t){this.transactionService=i;this.userService=t;this.transactions=[];this.isAdmin=!1;this.pageNumber=1;this.pageSize=10;this.totalElements=0}ngOnInit(){this.listValues(),this.userService.isAdmin.subscribe(i=>{this.isAdmin=i})}listValues(){this.transactionService.getAll(this.pageNumber-1,this.pageSize).subscribe(i=>{i&&(this.transactions=i.content,this.pageNumber=i.pageable.pageNumber+1,this.pageSize=i.pageable.pageSize,this.totalElements=i.totalElements)})}updatePageSize(i){this.pageSize=+i,this.listValues()}static{this.\u0275fac=function(t){return new(t||a)(m(y),m(_))}}static{this.\u0275cmp=b({type:a,selectors:[["app-transaction-list"]],standalone:!1,decls:31,vars:7,consts:[["pageSizeSelect",""],[1,"table","table-light"],["scope","col"],["scope","col",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-md-9",2,"padding-left","5%"],[3,"pageChange","page","pageSize","collectionSize","maxSize","boundaryLinks"],[1,"col-md-3","mt-2",2,"text-align","right"],[1,"mr-2"],[3,"change"],["selected","true"],["scope","row"],[3,"routerLink"],[4,"ngIf"]],template:function(t,o){if(t&1){let v=O();n(0,"table",1)(1,"thead")(2,"tr")(3,"th",2),r(4,"#"),e(),n(5,"th",2),r(6,"Description"),e(),n(7,"th",2),r(8,"Product Name"),e(),n(9,"th",2),r(10,"Created At"),e(),d(11,nt,2,0,"th",3),e()(),n(12,"tbody"),d(13,at,13,12,"tr",4),e()(),n(14,"div")(15,"div",5)(16,"div",6)(17,"ngb-pagination",7),U("pageChange",function(f){return h(v),F(o.pageNumber,f)||(o.pageNumber=f),I(f)}),z("pageChange",function(){return h(v),I(o.listValues())}),e()(),n(18,"div",8)(19,"span",9),r(20,"Page Size "),e(),n(21,"select",10,0),z("change",function(){h(v);let f=V(22);return I(o.updatePageSize(f.value))}),n(23,"option"),r(24,"5"),e(),n(25,"option",11),r(26,"10"),e(),n(27,"option"),r(28,"20"),e(),n(29,"option"),r(30,"50"),e()()()()()}t&2&&(s(11),l("ngIf",o.isAdmin),s(2),l("ngForOf",o.transactions),s(4),D("page",o.pageNumber),l("pageSize",o.pageSize)("collectionSize",o.totalElements)("maxSize",5)("boundaryLinks",!0))},dependencies:[q,x,E,Q,G],encapsulation:2})}};var ot=[{path:"",component:N},{path:":itemid",component:R,resolve:{transaction:u}}],A=class a{static{this.\u0275fac=function(t){return new(t||a)}}static{this.\u0275mod=T({type:a})}static{this.\u0275inj=S({imports:[P.forChild(ot),P]})}};var $=class a{static{this.\u0275fac=function(t){return new(t||a)}}static{this.\u0275mod=T({type:a})}static{this.\u0275inj=S({providers:[u],imports:[H,A,X]})}};export{$ as TransactionModule};
